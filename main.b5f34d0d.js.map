{"version":3,"sources":["scripts/main.js"],"names":["board","score","rows","columns","setGame","tbody","document","getElementById","r","row","createElement","rowId","setAttribute","appendChild","c","cell","toString","updateCell","startButton","addEventListener","classList","remove","innerHTML","add","getElementsByClassName","num","innerText","setNumber","e","code","slideLeft","slideRight","slideUp","slideDown","isGameOver","setTimeout","hasEmptyCell","found","Math","floor","random","value","filterZeroes","filter","slide","i","length","push","reverse","y","x"],"mappings":"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","file":"main.b5f34d0d.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n/* eslint-disable no-shadow */\n\nlet board = [];\nlet score = 0;\nconst rows = 4;\nconst columns = 4;\n\nsetGame();\n\nfunction setGame() {\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  const tbody = document.getElementById('tbody');\n\n  for (let r = 0; r < rows; r++) {\n    const row = document.createElement('tr');\n    const rowId = `field_row_${r}`;\n\n    row.setAttribute('id', rowId);\n    tbody.appendChild(row);\n\n    for (let c = 0; c < columns; c++) {\n      const cell = document.createElement('td');\n\n      cell.setAttribute('id', r.toString() + '-' + c.toString());\n      row.appendChild(cell);\n\n      const num = board[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n};\n\nfunction startButton() {\n  document.getElementById('start_button').addEventListener('click', () => {\n    document.getElementById('start_button').classList.remove('start');\n    document.getElementById('start_button').innerHTML = 'Restart';\n    document.getElementById('start_button').classList.add('restart');\n    document.getElementsByClassName('message')[2].classList.add('hidden');\n\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < columns; c++) {\n        board[r][c] = 0;\n\n        const num = board[r][c];\n        const cell = document.getElementById(r.toString() + '-' + c.toString());\n\n        updateCell(cell, num);\n        score = 0;\n        document.getElementById('score').innerText = score;\n      }\n    }\n\n    setNumber();\n    setNumber();\n  });\n\n  document.addEventListener('keyup', (e) => {\n    switch (e.code) {\n      case 'ArrowLeft':\n        slideLeft();\n        setNumber();\n        break;\n      case 'ArrowRight':\n        slideRight();\n        setNumber();\n        break;\n      case 'ArrowUp':\n        slideUp();\n        setNumber();\n        break;\n      case 'ArrowDown':\n        slideDown();\n        setNumber();\n        break;\n      default:\n        break;\n    }\n\n    if (isGameOver()) {\n      setTimeout(function() {\n        document.getElementsByClassName('message')[0]\n          .classList.remove('hidden');\n      }, 1000);\n    }\n  });\n};\n\nstartButton();\n\nfunction hasEmptyCell() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction setNumber() {\n  if (!hasEmptyCell()) {\n    return;\n  }\n\n  let found = false;\n\n  while (!found) {\n    const r = Math.floor(Math.random() * rows);\n    const c = Math.floor(Math.random() * columns);\n\n    if (board[r][c] === 0) {\n      board[r][c] = Math.random() > 0.1 ? 2 : 4;\n\n      const value = board[r][c];\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n\n      cell.innerText = value;\n      cell.classList.add('field_cell--2');\n      found = true;\n    }\n  }\n}\n\nfunction updateCell(cell, num) {\n  cell.innerHTML = '';\n  cell.classList.value = '';\n  cell.classList.add('field_cell');\n\n  if (num > 0) {\n    cell.innerText = num;\n\n    if (num <= 2048) {\n      cell.classList.add('field_cell--' + num.toString());\n    } else {\n      cell.classList.remove('field_cell--' + num.toString());\n    }\n  }\n\n  if (num === 2048) {\n    document.getElementsByClassName('message')[1].classList.remove('hidden');\n  }\n}\n\nfunction filterZeroes(row) {\n  return row.filter(num => num !== 0);\n}\n\nfunction slide(row) {\n  // eslint-disable-next-line no-param-reassign\n  row = filterZeroes(row);\n\n  for (let i = 0; i < row.length - 1; i++) {\n    if (row[i] === row[i + 1]) {\n      row[i] *= 2;\n      row[i + 1] = 0;\n      score += row[i];\n\n      document.getElementById('score').innerText = score;\n    }\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  row = filterZeroes(row);\n\n  while (row.length < columns) {\n    row.push(0);\n  }\n\n  return row;\n}\n\nfunction slideLeft() {\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n\n    row = slide(row);\n    board[r] = row;\n\n    for (let c = 0; c < columns; c++) {\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n}\n\nfunction slideRight() {\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n    board[r] = row;\n\n    for (let c = 0; c < columns; c++) {\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n}\n\nfunction slideUp() {\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n    row = slide(row);\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n}\n\nfunction slideDown() {\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const cell = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateCell(cell, num);\n    }\n  }\n}\n\nfunction isGameOver() {\n  for (let y = 0; y < rows; y++) {\n    for (let x = 0; x < columns; x++) {\n      if (board[y][x] === 0) {\n        return false;\n      }\n    }\n  }\n\n  for (let y = 0; y < rows - 1; y++) {\n    for (let x = 0; x < columns - 1; x++) {\n      const c = board[y][x];\n\n      if (c !== 0 && (c === board[y + 1][x] || c === board[y][x + 1])) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n"]}